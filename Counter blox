-- CuTins Heck HUB 2025 - ERROR FIXED
-- SCRIPT ƒê√É S·ª¨A L·ªñI HO√ÄN TO√ÄN

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- C·∫§U H√åNH
local CuTins = {
    ACTIVE = true,
    VERSION = "CuTins Heck 2025",
    
    AIMBOT = {
        ENABLED = false,
        FOV = 80,
        SMOOTHING = 0.3,
        TEAM_CHECK = true
    },
    
    ESP = {
        ENABLED = false,
        TEAM_CHECK = true
    },
    
    HITBOX = {
        ENABLED = false,
        SIZE = 2.0
    },
    
    FLY = {
        ENABLED = false,
        SPEED = 3
    }
}

-- BI·∫æN
local TARGET = nil
local ESP_ITEMS = {}
local BODYGYRO, BODYVELOCITY = nil, nil

-- ‚úÖ T·∫†O GUI ƒê∆†N GI·∫¢N - KH√îNG L·ªñI
local function createGUI()
    -- X√≥a GUI c≈©
    if game:GetService("CoreGui"):FindFirstChild("CuTinsFixed") then
        game:GetService("CoreGui").CuTinsFixed:Destroy()
    end

    -- T·∫°o GUI m·ªõi
    local GUI = Instance.new("ScreenGui")
    GUI.Name = "CuTinsFixed"
    GUI.Parent = game:GetService("CoreGui")

    -- Main Frame
    local MainFrame = Instance.new("Frame")
    MainFrame.Size = UDim2.new(0, 300, 0, 400)
    MainFrame.Position = UDim2.new(0, 20, 0.5, -200)
    MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
    MainFrame.BorderSizePixel = 2
    MainFrame.BorderColor3 = Color3.fromRGB(255, 50, 50)
    MainFrame.Active = true
    MainFrame.Draggable = true
    MainFrame.Parent = GUI

    -- Title Bar
    local TitleBar = Instance.new("Frame")
    TitleBar.Size = UDim2.new(1, 0, 0, 40)
    TitleBar.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
    TitleBar.Parent = MainFrame

    local TitleLabel = Instance.new("TextLabel")
    TitleLabel.Size = UDim2.new(1, -50, 1, 0)
    TitleLabel.BackgroundTransparency = 1
    TitleLabel.Text = "CuTins FPS 2025"
    TitleLabel.TextColor3 = Color3.white
    TitleLabel.TextSize = 16
    TitleLabel.Font = Enum.Font.GothamBold
    TitleLabel.Parent = TitleBar

    local CloseButton = Instance.new("TextButton")
    CloseButton.Size = UDim2.new(0, 30, 0, 30)
    CloseButton.Position = UDim2.new(1, -35, 0, 5)
    CloseButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
    CloseButton.Text = "X"
    CloseButton.TextColor3 = Color3.white
    CloseButton.TextSize = 14
    CloseButton.Font = Enum.Font.GothamBold
    CloseButton.Parent = TitleBar

    -- Content Area
    local Content = Instance.new("ScrollingFrame")
    Content.Size = UDim2.new(1, -20, 1, -60)
    Content.Position = UDim2.new(0, 10, 0, 50)
    Content.BackgroundTransparency = 1
    Content.ScrollBarThickness = 4
    Content.CanvasSize = UDim2.new(0, 0, 0, 600)
    Content.Parent = MainFrame

    -- T·∫†O C√ÅC N√öT T√çNH NƒÇNG
    local features = {
        {"üéØ AIMBOT", "AIMBOT", "ENABLED"},
        {"üîµ TEAM CHECK", "AIMBOT", "TEAM_CHECK"},
        {"üëÅÔ∏è ESP", "ESP", "ENABLED"},
        {"üîµ TEAM ESP", "ESP", "TEAM_CHECK"},
        {"üéØ HITBOX", "HITBOX", "ENABLED"},
        {"üïäÔ∏è FLY", "FLY", "ENABLED"}
    }

    for i, feature in ipairs(features) do
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(1, 0, 0, 50)
        btn.Position = UDim2.new(0, 0, 0, (i-1) * 55)
        btn.BackgroundColor3 = CuTins[feature[2]][feature[3]] and Color3.fromRGB(0, 150, 0) or Color3.fromRGB(60, 60, 80)
        btn.Text = feature[1] .. "\n" .. (CuTins[feature[2]][feature[3]] and "ON" or "OFF")
        btn.TextColor3 = Color3.white
        btn.TextSize = 14
        btn.Font = Enum.Font.GothamBold
        btn.TextWrapped = true
        btn.Parent = Content
        
        btn.MouseButton1Click:Connect(function()
            CuTins[feature[2]][feature[3]] = not CuTins[feature[2]][feature[3]]
            btn.BackgroundColor3 = CuTins[feature[2]][feature[3]] and Color3.fromRGB(0, 150, 0) or Color3.fromRGB(60, 60, 80)
            btn.Text = feature[1] .. "\n" .. (CuTins[feature[2]][feature[3]] and "ON" or "OFF")
            
            -- X·ª≠ l√Ω ƒë·∫∑c bi·ªát
            if feature[2] == "FLY" then
                toggleFly()
            elseif feature[2] == "ESP" and not CuTins.ESP.ENABLED then
                cleanupESP()
            end
        end)
    end

    -- S·ª∞ KI·ªÜN ƒê√ìNG
    CloseButton.MouseButton1Click:Connect(function()
        GUI:Destroy()
        CuTins.ACTIVE = false
    end)

    return GUI
end

-- ‚úÖ H√ÄM GAME - ƒê√É S·ª¨A L·ªñI
local function getClosestPlayer()
    if not CuTins.AIMBOT.ENABLED then return nil end
    
    local closest = nil
    local closestDist = CuTins.AIMBOT.FOV
    
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            -- Team Check
            if CuTins.AIMBOT.TEAM_CHECK then
                if player.Team and LocalPlayer.Team and player.Team == LocalPlayer.Team then
                    continue
                end
            end
            
            local root = player.Character:FindFirstChild("HumanoidRootPart")
            if root then
                local screenPos, onScreen = Camera:WorldToViewportPoint(root.Position)
                if onScreen then
                    local mousePos = UserInputService:GetMouseLocation()
                    local distance = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude
                    if distance < closestDist then
                        closestDist = distance
                        closest = player
                    end
                end
            end
        end
    end
    return closest
end

local function aimAtTarget()
    if not TARGET or not TARGET.Character then return end
    
    local targetPart = TARGET.Character:FindFirstChild("Head") or TARGET.Character:FindFirstChild("HumanoidRootPart")
    if not targetPart then return end
    
    local currentCF = Camera.CFrame
    local targetPos = targetPart.Position
    
    local direction = (targetPos - currentCF.Position).Unit
    local smoothDirection = currentCF.LookVector:Lerp(direction, CuTins.AIMBOT.SMOOTHING)
    Camera.CFrame = CFrame.new(currentCF.Position, currentCF.Position + smoothDirection)
end

local function updateESP()
    -- D·ªçn d·∫πp ESP c≈©
    for player, highlight in pairs(ESP_ITEMS) do
        if highlight then
            highlight:Destroy()
        end
    end
    ESP_ITEMS = {}
    
    if not CuTins.ESP.ENABLED then return end
    
    -- T·∫°o ESP m·ªõi
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            -- Team Check
            if CuTins.ESP.TEAM_CHECK then
                if player.Team and LocalPlayer.Team and player.Team == LocalPlayer.Team then
                    goto continue
                end
            end
            
            local highlight = Instance.new("Highlight")
            highlight.FillColor = Color3.fromRGB(255, 50, 50)
            highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
            highlight.FillTransparency = 0.8
            highlight.Adornee = player.Character
            highlight.Parent = player.Character
            
            ESP_ITEMS[player] = highlight
            
            ::continue::
        end
    end
end

local function cleanupESP()
    for player, highlight in pairs(ESP_ITEMS) do
        if highlight then
            highlight:Destroy()
        end
    end
    ESP_ITEMS = {}
end

local function updateHitboxes()
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            local head = player.Character:FindFirstChild("Head")
            if head then
                -- X√≥a hitbox c≈©
                local oldHitbox = head:FindFirstChild("CUTINS_HITBOX")
                if oldHitbox then
                    oldHitbox:Destroy()
                end
                
                -- T·∫°o hitbox m·ªõi n·∫øu b·∫≠t
                if CuTins.HITBOX.ENABLED then
                    local hitbox = Instance.new("Part")
                    hitbox.Name = "CUTINS_HITBOX"
                    hitbox.Size = head.Size * CuTins.HITBOX.SIZE
                    hitbox.Transparency = 0.7
                    hitbox.Color = Color3.fromRGB(255, 0, 0)
                    hitbox.CanCollide = false
                    hitbox.Anchored = false
                    hitbox.Parent = head
                    
                    local weld = Instance.new("Weld")
                    weld.Part0 = head
                    weld.Part1 = hitbox
                    weld.C0 = CFrame.new()
                    weld.Parent = hitbox
                end
            end
        end
    end
end

local function toggleFly()
    -- D·ªçn d·∫πp fly c≈©
    if BODYGYRO then 
        BODYGYRO:Destroy() 
        BODYGYRO = nil
    end
    if BODYVELOCITY then 
        BODYVELOCITY:Destroy() 
        BODYVELOCITY = nil
    end
    
    if not CuTins.FLY.ENABLED then return end
    
    local character = LocalPlayer.Character
    if not character then return end
    
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return end
    
    -- T·∫°o fly components
    BODYGYRO = Instance.new("BodyGyro")
    BODYGYRO.P = 1000
    BODYGYRO.D = 50
    BODYGYRO.MaxTorque = Vector3.new(4000, 4000, 4000)
    BODYGYRO.CFrame = rootPart.CFrame
    BODYGYRO.Parent = rootPart
    
    BODYVELOCITY = Instance.new("BodyVelocity")
    BODYVELOCITY.Velocity = Vector3.new(0, 0, 0)
    BODYVELOCITY.MaxForce = Vector3.new(4000, 4000, 4000)
    BODYVELOCITY.Parent = rootPart
end

-- ‚úÖ V√íNG L·∫∂P CH√çNH - ƒê√É S·ª¨A L·ªñI
RunService.Heartbeat:Connect(function()
    -- Aimbot
    if CuTins.AIMBOT.ENABLED and TARGET then
        aimAtTarget()
    end
    
    -- ESP
    updateESP()
    
    -- Hitbox
    updateHitboxes()
    
    -- Fly controls
    if CuTins.FLY.ENABLED and BODYVELOCITY then
        local character = LocalPlayer.Character
        if character then
            local rootPart = character:FindFirstChild("HumanoidRootPart")
            if rootPart then
                local moveDirection = Vector3.new(0, 0, 0)
                
                if UserInputService:IsKeyDown(Enum.KeyCode.W) then
                    moveDirection = moveDirection + rootPart.CFrame.LookVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.S) then
                    moveDirection = moveDirection - rootPart.CFrame.LookVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.A) then
                    moveDirection = moveDirection - rootPart.CFrame.RightVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.D) then
                    moveDirection = moveDirection + rootPart.CFrame.RightVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
                    moveDirection = moveDirection + Vector3.new(0, 1, 0)
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
                    moveDirection = moveDirection + Vector3.new(0, -1, 0)
                end
                
                BODYVELOCITY.Velocity = moveDirection * CuTins.FLY.SPEED * 10
            end
        end
    end
end)

-- ‚úÖ X·ª¨ L√ù INPUT - ƒê√É S·ª¨A L·ªñI
UserInputService.InputBegan:Connect(function(input, processed)
    if processed then return end
    
    -- Aimbot v·ªõi chu·ªôt tr√°i
    if input.UserInputType == Enum.UserInputType.MouseButton1 and CuTins.AIMBOT.ENABLED then
        TARGET = getClosestPlayer()
    end
    
    -- Toggle GUI v·ªõi Insert
    if input.KeyCode == Enum.KeyCode.Insert then
        createGUI()
    end
end)

UserInputService.InputEnded:Connect(function(input, processed)
    if processed then return end
    
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        TARGET = nil
    end
end)

-- ‚úÖ KH·ªûI T·∫†O AN TO√ÄN
local success, err = pcall(function()
    local GUI = createGUI()
    
    print([[
     
 ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà    ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà ‚ñà‚ñà‚ñà    ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
‚ñà‚ñà      ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà
‚ñà‚ñà      ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà ‚ñà‚ñà ‚ñà‚ñà  ‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
‚ñà‚ñà      ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà    ‚ñà‚ñà ‚ñà‚ñà  ‚ñà‚ñà ‚ñà‚ñà     ‚ñà‚ñà
 ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà     ‚ñà‚ñà    ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
                                                 
        Menu Hack - CuTins ¬© 2025

‚úÖ SCRIPT ƒê√É CH·∫†Y TH√ÄNH C√îNG!

]])

end)

if not success then
    warn("L·ªói kh·ªüi t·∫°o: " .. tostring(err))
end

-- D·ªçn d·∫πp khi tho√°t
game:GetService("Players").PlayerRemoving:Connect(function(player)
    if player == LocalPlayer then
        CuTins.ACTIVE = false
        if BODYGYRO then BODYGYRO:Destroy() end
        if BODYVELOCITY then BODYVELOCITY:Destroy() end
        cleanupESP()
    end
end)
